<!DOCTYPE html>
<html>
  <head>
    <title>RecruitmentPortal</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  </head>

  <body>
	  
		  
	  <%= render 'layouts/layout_header' %>
	  
	  <div class="ap_container page-body flex_row">
		  
		  <%= render 'layouts/layout_sidemenu' %>
	  	  
		  <div class="flex_col">
			  
			  <div class="flex_col">
				  <div class="top_info flex_row">
					  <% if !notice.blank? || !alert.blank? %>
					  <div class="notification_container flex_col">
						  <div style="float:left">
							  <% if !notice.blank? %>
							  <p id="notice"><%= notice %></p>
							  <% end %>
							  <% if !alert.blank? %>
							  <p id="alert"><b>ERROR:</b> <%= alert %></p>
							  <% end %>
						  </div>
						  <div style="float:right"><a href="">close</a></div>
					  </div>
					  <% end %>
					  
					  <div class="date_container flex_col" style="width:400px;text-align:right">
						  <b>Date:</b> <%= Date.today.strftime("%A %B %d, %Y") %>
					  </div>
				  </div>
				  
				  <div class="top_info flex_row">
					  <% if user_signed_in? && current_user.is_employee? %>
					      <% wd_notifications = current_user.profile.employee.work_durations.where(:status_read => true) %>
						  <% wd_notifications.each do |wd| %>
						  <% if !(wd.is_rejected? || wd.is_approved?) %>
						  <% next %>
						  <% end %>
						  <div class="notification_container flex_col">
						  <div style="float:left">
							  Timesheet for period <b>(<%= wd.work_day.strftime("%b %d, %Y") %> - <%= (wd.work_day + 4).strftime("%b %d, %Y") %>)</b> has been 
							  <b style="color: <%= wd.time_sheet_status.upcase == 'REJECTED' ? 'red' : 'green' %>"> <%= wd.time_sheet_status.upcase %> </b>
							  <% if wd.time_sheet_status.upcase == "REJECTED" %>
							  <br /><b>message:</b> <%= wd.rejection_message %>
							  <% end %>
						  </div>
						  <div style="float:right"><%= link_to "ok", {:controller => "work_durations", :action => "update_notification_read", :wd_id => wd.id }, :method => :put %></div>
						  </div>
						  <% end %>
					  <% end %>
				  </div>
			  </div>
		  
			  <div class="main_page_title"> <%= @title %> </div>
		  
			  <div class="main" style="<%= user_signed_in? ? '' : 'width:100%' %>">
		  
			  	<%= yield %>
			
		  	  </div>
		  </div>
	  </div>
	<%= render 'layouts/layout_footer' %>
	
  </body>
</html>
