
<div class="page_heading">Dashboard</div>
<div class="flex_row">
	<div class="flex_col">
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Full Name: </div>
			<div class="flex_col"> <%= @employee.profile.name %> </div>
		</div>
		
		<div class="" style="height:10px"></div>
		
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Project: </div>
			<div class="flex_col"> <%= @employee.projects.count > 0 ? "(Not Assigned)" : @employee.projects.first.name %> </div>
		</div>
		
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Client: </div>
			<div class="flex_col"> <%= @employee.client.blank? ? "(Not Assigned)" : @employee.client.company_name %> </div>
		</div>
	
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Employer: </div>
			<div class="flex_col"> <%= @employee.employer.blank? ? "(Not Assigned)" : @employee.employer.company_name %> </div>
		</div>
		
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Project Address: </div>
			<div class="flex_col"> (Not Provided) </div>
		</div>	
		
	</div>
	
</div>

<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<div class="section" id="calender">
  <%= render "calender", 
    show_unsubmitted:(@employee.profile.id == current_user.profile.id),
  	work_durations:@employee.work_durations, 
  	can_update_all:false, 
  	can_update:current_user.profile.id == @employee.profile.id, 
  	can_act:current_user.is_admin? || current_user.is_account_manager?, 
  	show_employee_info:current_user.is_admin? || current_user.is_account_manager?,
	show_filters:false,
	show_each_day:true,
	show_submitted_date:false,
	show_contract_type:false,
	show_project_name:false,
	show_pastdue:false
	%>
</div>

<% if false %>

<div class="">
<b> Assigned To: </b> <%# @employee.vendor == nil ? "None" : @employee.vendor.profile.full_name %>
</div>
<b> Weekly Report </b>
<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<% for day in (today.at_beginning_of_week..today.at_end_of_week).map.each { |day| day } do %>
<div class="">
	<% start_time = DateTime.parse(day.to_s) %>
	<% hours = @employee.work_durations.where('work_day = ?', start_time) %>
    
	<%= day.strftime(" %b %e") %>: 
	<% if hours.count > 0 %>
		<%= hours.first.hours %> Hours <%= link_to "Update Hours", edit_work_duration_url(:id => hours.first.id, :eid => @employee.id, :date => day) %>
	<% else %>
		<%= link_to "Add Hours", new_work_duration_url(:eid => @employee.id, :date => day) %>
	<% end %>
</div>
<% end %>

<%# end_time = 6.day.since(start_time) %>
<%# Article.where('published_on >= ? and published_on < ?', start_time, end_time) %>

<% end %>