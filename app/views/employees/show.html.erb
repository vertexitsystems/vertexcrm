
<div class="page_heading">Timesheet Management</div>
<div class="flex_row">
	<div class="flex_col">
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Client: </div>
			<div class="flex_col"> <%= @employee.client.blank? ? "(Not Assigned)" : @employee.client.company_name %> </div>
		</div>
	
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Client Address: </div>
			<div class="flex_col"> <%= @employee.client.blank? ? "(Not Assigned)" : @employee.client.company_address %> </div>
		</div>
		
		<div class="" style="height:10px"></div>
		
		<% vendor = @employee.vendors.first %>
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Vendor: </div>
			<div class="flex_col"> <%= vendor.blank? ? "(Not Assigned)" : vendor.company_name %> </div>
		</div>
	
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Vendor Address: </div>
			<div class="flex_col"> <%= vendor.blank? ? "(Not Assigned)" : vendor.company_address %> </div>
		</div>
		
		
	</div>
	<div class="flex_col">
		<% if @employee.contract_type != "w2"%>
		<div class="flex_row info_row">
			<div class="flex_col col_heading" style="width:30%"> Employer: </div>
			<div class="flex_col"> <%= @employee.employer.blank? ? "(Not Assigned)" : @employee.employer.company_name %> </div>
		</div>
		
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Employer Address: </div>
			<div class="flex_col"> <%= @employee.employer.blank? ? "(Not Assigned)" : @employee.employer.company_address %> </div>
		</div>
		
		<div class="" style="height:10px"></div>
		<% end %>
		
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Contract Type: </div>
			<div class="flex_col">
				<%= @employee.contract_type %>
			</div>
		</div>
		<div class="flex_row info_row">
			<div class="flex_col col_heading"> Active Jobs: </div>
			<div class="flex_col">
				<% if @employee.active_postings.count <= 0 %>
					(UnAssigned)
				<% else %>
					<% @employee.active_postings.each do |posting| %>
					<%= "#{posting.job.title} (Started: #{posting.start_date})" %> <br />
					<% end %>
				<% end %>
			</div>
		</div>
	
		
	</div>
	
</div>

<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<div class="section" id="calender">
  <%= render "calender", 
    show_unsubmitted:(@employee.profile.id == current_user.profile.id),
  	work_durations:@employee.work_durations, 
  	can_update_all:true, 
  	can_update:current_user.profile.id == @employee.profile.id, 
  	can_act:current_user.is_admin? || current_user.is_account_manager?, 
  	show_employee_info:true,
	show_each_day:true,
	show_submitted_date:false,
	show_filters:true,
	show_contract_type:false,
	show_project_name:false,
	employee:@employee,
	show_actionables_consultant:true
	%>
</div>

<% if false %>

<div class="">
<b> Assigned To: </b> <%# @employee.vendor == nil ? "None" : @employee.vendor.profile.full_name %>
</div>
<b> Weekly Report </b>
<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<% for day in (today.at_beginning_of_week..today.at_end_of_week).map.each { |day| day } do %>
<div class="">
	<% start_time = DateTime.parse(day.to_s) %>
	<% hours = @employee.work_durations.where('work_day = ?', start_time) %>
    
	<%= day.strftime(" %b %e") %>: 
	<% if hours.count > 0 %>
		<%= hours.first.hours %> Hours <%= link_to "Update Hours", edit_work_duration_url(:id => hours.first.id, :eid => @employee.id, :date => day) %>
	<% else %>
		<%= link_to "Add Hours", new_work_duration_url(:eid => @employee.id, :date => day) %>
	<% end %>
</div>
<% end %>

<%# end_time = 6.day.since(start_time) %>
<%# Article.where('published_on >= ? and published_on < ?', start_time, end_time) %>

<% end %>