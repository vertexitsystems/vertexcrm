<p id="notice"><%= notice %></p>

<% def show_document(title, document) %>
<div class="employee_info_item">
	<b><%= title %>: </b> 
	<% if document.present? %>
	<%= link_to "Show", document.url %> | <%= link_to "Change", edit_employee_path(@employee) %>
	<% else %>
	(Not Provided)
	<% end %>
</div>
<% end %>

<div class="flex_row">
	<div class="flex_col" style="text-align:left">
		<p style="padding-left:20px">
		  <strong>Name:</strong> <%= @employee.profile.full_name %> | (<%= link_to "Edit", edit_employee_path(@employee) %>)</br>
		  <%if current_user.is_admin? || current_user.is_account_manager? %>
		  	<strong>Role:</strong><%= @employee.profile.role %> </br>
		  <% end %>
		</p>
	</div>
	<div class="flex_col" style="text-align:right">
		<% show_document("Passport", @employee.passport) %>
		<% show_document("Visa", @employee.visa) %>
		<% show_document("State ID", @employee.state_id) %>
		<% show_document("i9", @employee.i9) %>
		<% show_document("E-Verify", @employee.e_verify) %>
		<% show_document("W9", @employee.w9) %>
		<% show_document("PSA", @employee.psa) %>
		<% show_document("Void Check", @employee.voided_check_copy) %>
		
	</div>
</div>

<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<div class="section" id="calender">
  <%= render "calender", 
  	work_durations:@employee.work_durations, 
  	can_update_all:current_user.is_admin?, 
  	can_update:current_user.profile.id == @employee.profile.id, 
  	can_act:false, 
  	show_employee_info:current_user.is_admin? || current_user.is_account_manager?,
	show_filters:false
	%>
</div>

<% if false %>

<div class="">
<b> Assigned To: </b> <%# @employee.vendor == nil ? "None" : @employee.vendor.profile.full_name %>
</div>
<b> Weekly Report </b>
<% today = Date.today # Today's date %>
<% @days_from_this_week = (today.at_beginning_of_week..today.at_end_of_week).map %> 
<% for day in (today.at_beginning_of_week..today.at_end_of_week).map.each { |day| day } do %>
<div class="">
	<% start_time = DateTime.parse(day.to_s) %>
	<% hours = @employee.work_durations.where('work_day = ?', start_time) %>
    
	<%= day.strftime(" %b %e") %>: 
	<% if hours.count > 0 %>
		<%= hours.first.hours %> Hours <%= link_to "Update Hours", edit_work_duration_url(:id => hours.first.id, :eid => @employee.id, :date => day) %>
	<% else %>
		<%= link_to "Add Hours", new_work_duration_url(:eid => @employee.id, :date => day) %>
	<% end %>

</div>
<% end %>

<%# end_time = 6.day.since(start_time) %>
<%# Article.where('published_on >= ? and published_on < ?', start_time, end_time) %>

<% end %>